{"version":3,"names":["Util","$","TRANSITION_END","triggerTransitionEnd","element","trigger","supportsTransitionEnd","Boolean","transitionEndEmulator","duration","called","this","one","setTimeout","fn","mmEmulateTransitionEnd","event","special","bindType","delegateType","handle","target","is","handleObj","handler","apply","arguments","NAME","DATA_KEY","EVENT_KEY","JQUERY_NO_CONFLICT","Default","toggle","preventDefault","triggerElement","parentTrigger","subMenu","Event","SHOW","SHOWN","HIDE","HIDDEN","CLICK_DATA_API","ClassName","MetisMenu","constructor","config","transitioning","init","self","conf","el","addClass","find","children","attr","parents","has","not","on","e","eTar","paRent","parent","sibLi","siblings","sibTrigger","hasClass","removeActive","setActive","onTransitionStart","li","ul","length","show","removeClass","hide","elem","startEvent","isDefaultPrevented","toggleElem","height","setTransitioning","scrollHeight","offsetHeight","complete","onTransitionEnd","css","isTransitioning","dispose","removeData","off","jQueryInterface","each","$this","data","undefined","Error","Constructor","noConflict"],"sources":["../src/util.js","../src/index.js"],"sourcesContent":["import $ from 'jquery';\n\nconst Util = (($) => {\n  const TRANSITION_END = 'transitionend';\n\n  const Util = {\n    TRANSITION_END: 'mmTransitionEnd',\n\n    triggerTransitionEnd(element) {\n      $(element).trigger(TRANSITION_END);\n    },\n\n    supportsTransitionEnd() {\n      return Boolean(TRANSITION_END);\n    },\n  };\n\n  function getSpecialTransitionEndEvent() {\n    return {\n      bindType: TRANSITION_END,\n      delegateType: TRANSITION_END,\n      handle(event) {\n        if ($(event.target).is(this)) {\n          return event\n            .handleObj\n            .handler\n            .apply(this, arguments);\n        }\n        return undefined;\n      },\n    };\n  }\n\n  function transitionEndEmulator(duration) {\n    let called = false;\n\n    $(this).one(Util.TRANSITION_END, () => {\n      called = true;\n    });\n\n    setTimeout(() => {\n      if (!called) {\n        Util.triggerTransitionEnd(this);\n      }\n    }, duration);\n\n    return this;\n  }\n\n  function setTransitionEndSupport() {\n    $.fn.mmEmulateTransitionEnd = transitionEndEmulator;\n    $.event.special[Util.TRANSITION_END] = getSpecialTransitionEndEvent();\n  }\n\n  setTransitionEndSupport();\n\n  return Util;\n})($);\n\nexport default Util;\n","import $ from 'jquery';\nimport Util from './util';\n\nconst NAME = 'metisMenu';\nconst DATA_KEY = 'metisMenu';\nconst EVENT_KEY = `.${DATA_KEY}`;\nconst DATA_API_KEY = '.data-api';\nconst JQUERY_NO_CONFLICT = $.fn[NAME];\nconst TRANSITION_DURATION = 350;\n\nconst Default = {\n    toggle: true,\n    preventDefault: true,\n    triggerElement: 'a',\n    parentTrigger: 'li',\n    subMenu: 'ul',\n};\n\nconst Event = {\n    SHOW: `show${EVENT_KEY}`,\n    SHOWN: `shown${EVENT_KEY}`,\n    HIDE: `hide${EVENT_KEY}`,\n    HIDDEN: `hidden${EVENT_KEY}`,\n    CLICK_DATA_API: `click${EVENT_KEY}${DATA_API_KEY}`,\n};\n\nconst ClassName = {\n    METIS: 'metismenu',\n    ACTIVE: 'mm-active',\n    SHOW: 'mm-show',\n    COLLAPSE: 'mm-collapse',\n    COLLAPSING: 'mm-collapsing',\n    COLLAPSED: 'mm-collapsed',\n};\n\nclass MetisMenu {\n    constructor(element, config) {\n        this.element = element;\n        this.config = {\n            ...Default,\n            ...config,\n        };\n        this.transitioning = null;\n\n        this.init();\n    }\n\n    init() {\n        const self = this;\n        const conf = this.config;\n        const el = $(this.element);\n\n        el.addClass(ClassName.METIS); // add metismenu class to element\n\n        el.find(`${conf.parentTrigger}.${ClassName.ACTIVE}`)\n            .children(conf.triggerElement)\n            .attr('aria-expanded', 'true'); // add attribute aria-expanded=true the trigger element\n\n        el.find(`${conf.parentTrigger}.${ClassName.ACTIVE}`)\n            .parents(conf.parentTrigger)\n            .addClass(ClassName.ACTIVE);\n\n        el.find(`${conf.parentTrigger}.${ClassName.ACTIVE}`)\n            .parents(conf.parentTrigger)\n            .children(conf.triggerElement)\n            .attr('aria-expanded', 'true'); // add attribute aria-expanded=true the triggers of all parents\n\n        el.find(`${conf.parentTrigger}.${ClassName.ACTIVE}`)\n            .has(conf.subMenu)\n            .children(conf.subMenu)\n            .addClass(`${ClassName.COLLAPSE} ${ClassName.SHOW}`);\n\n        el\n            .find(conf.parentTrigger)\n            .not(`.${ClassName.ACTIVE}`)\n            .has(conf.subMenu)\n            .children(conf.subMenu)\n            .addClass(ClassName.COLLAPSE);\n\n        el\n            .find(conf.parentTrigger)\n            // .has(conf.subMenu)\n            .children(conf.triggerElement)\n            .on(Event.CLICK_DATA_API, function(e) {\n                const eTar = $(this);\n\n                if (eTar.attr('aria-disabled') === 'true') {\n                    return;\n                }\n\n                if (conf.preventDefault && eTar.attr('href') === '#') {\n                    e.preventDefault();\n                }\n\n                const paRent = eTar.parent(conf.parentTrigger);\n                const sibLi = paRent.siblings(conf.parentTrigger);\n                const sibTrigger = sibLi.children(conf.triggerElement);\n\n                if (paRent.hasClass(ClassName.ACTIVE)) {\n                    eTar.attr('aria-expanded', 'false');\n                    self.removeActive(paRent);\n                } else {\n                    eTar.attr('aria-expanded', 'true');\n                    self.setActive(paRent);\n                    if (conf.toggle) {\n                        self.removeActive(sibLi);\n                        sibTrigger.attr('aria-expanded', 'false');\n                    }\n                }\n\n                if (conf.onTransitionStart) {\n                    conf.onTransitionStart(e);\n                }\n            });\n    }\n\n    setActive(li) {\n        $(li).addClass(ClassName.ACTIVE);\n        const ul = $(li).children(this.config.subMenu);\n        if (ul.length > 0 && !ul.hasClass(ClassName.SHOW)) {\n            this.show(ul);\n        }\n    }\n\n    removeActive(li) {\n        $(li).removeClass(ClassName.ACTIVE);\n        const ul = $(li).children(`${this.config.subMenu}.${ClassName.SHOW}`);\n        if (ul.length > 0) {\n            this.hide(ul);\n        }\n    }\n\n    show(element) {\n        if (this.transitioning || $(element).hasClass(ClassName.COLLAPSING)) {\n            return;\n        }\n        const elem = $(element);\n\n        const startEvent = $.Event(Event.SHOW);\n        elem.trigger(startEvent);\n\n        if (startEvent.isDefaultPrevented()) {\n            return;\n        }\n\n        elem.parent(this.config.parentTrigger).addClass(ClassName.ACTIVE);\n\n        if (this.config.toggle) {\n            const toggleElem = elem.parent(this.config.parentTrigger).siblings().children(`${this.config.subMenu}.${ClassName.SHOW}`);\n            this.hide(toggleElem);\n        }\n\n        elem\n            .removeClass(ClassName.COLLAPSE)\n            .addClass(ClassName.COLLAPSING)\n            .height(0);\n\n        this.setTransitioning(true);\n\n        const complete = () => {\n            // check if disposed\n            if (!this.config || !this.element) {\n                return;\n            }\n            elem\n                .removeClass(ClassName.COLLAPSING)\n                .addClass(`${ClassName.COLLAPSE} ${ClassName.SHOW}`)\n                .height('');\n\n            this.setTransitioning(false);\n\n            elem.trigger(Event.SHOWN);\n        };\n\n        elem\n            .height(element[0].scrollHeight)\n            .one(Util.TRANSITION_END, complete)\n            .mmEmulateTransitionEnd(TRANSITION_DURATION);\n    }\n\n    hide(element) {\n        if (\n            this.transitioning || !$(element).hasClass(ClassName.SHOW)\n        ) {\n            return;\n        }\n\n        const elem = $(element);\n\n        const startEvent = $.Event(Event.HIDE);\n        elem.trigger(startEvent);\n\n        if (startEvent.isDefaultPrevented()) {\n            return;\n        }\n\n        elem.parent(this.config.parentTrigger).removeClass(ClassName.ACTIVE);\n        elem.height(elem.height())[0].offsetHeight;\n\n        elem\n            .addClass(ClassName.COLLAPSING)\n            .removeClass(ClassName.COLLAPSE)\n            .removeClass(ClassName.SHOW);\n\n        this.setTransitioning(true);\n\n        const complete = () => {\n            // check if disposed\n            if (!this.config || !this.element) {\n                return;\n            }\n            if (this.transitioning && this.config.onTransitionEnd) {\n                this.config.onTransitionEnd();\n            }\n\n            this.setTransitioning(false);\n            elem.trigger(Event.HIDDEN);\n\n            elem\n                .removeClass(ClassName.COLLAPSING)\n                .addClass(ClassName.COLLAPSE);\n        };\n\n        if (elem.height() === 0 || elem.css('display') === 'none') {\n            complete();\n        } else {\n            elem\n                .height(0)\n                .one(Util.TRANSITION_END, complete)\n                .mmEmulateTransitionEnd(TRANSITION_DURATION);\n        }\n    }\n\n    setTransitioning(isTransitioning) {\n        this.transitioning = isTransitioning;\n    }\n\n    dispose() {\n        $.removeData(this.element, DATA_KEY);\n\n        $(this.element)\n            .find(this.config.parentTrigger)\n            // .has(this.config.subMenu)\n            .children(this.config.triggerElement)\n            .off(Event.CLICK_DATA_API);\n\n        this.transitioning = null;\n        this.config = null;\n        this.element = null;\n    }\n\n    static jQueryInterface(config) {\n        return this.each(function() {\n            const $this = $(this);\n            let data = $this.data(DATA_KEY);\n            const conf = {\n                ...Default,\n                ...$this.data(),\n                ...(typeof config === 'object' && config ? config : {}),\n            };\n\n            if (!data) {\n                data = new MetisMenu(this, conf);\n                $this.data(DATA_KEY, data);\n            }\n\n            if (typeof config === 'string') {\n                if (data[config] === undefined) {\n                    throw new Error(`No method named \"${config}\"`);\n                }\n                data[config]();\n            }\n        });\n    }\n}\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$.fn[NAME] = MetisMenu.jQueryInterface;\n$.fn[NAME].Constructor = MetisMenu;\n$.fn[NAME].noConflict = () => {\n    $.fn[NAME] = JQUERY_NO_CONFLICT;\n    return MetisMenu.jQueryInterface;\n};\n\nexport { MetisMenu };\nexport default MetisMenu;\n"],"mappings":"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","ignoreList":[]}